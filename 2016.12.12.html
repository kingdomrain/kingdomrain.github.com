<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>事件流</title>
		<style>
			div{
				width:400px;
				height:50px;
				line-height:50px;
				background:#345678;
				color:#fff;
			}
			pre{
				background: #e4e4e4;
				color:#666;
			}
		</style>
	</head>
	<body>
		<div>事件流</div>
		<p>冒泡流</p>
		<pre>
			
    冒泡型事件：事件按照从最特定的事件目标到最不特定的事件目标(document对象)的顺序触发。

  IE 5.5: div -> body -> document

  IE 6.0: div -> body -> html -> document

  Mozilla 1.0: div -> body -> html -> document -> window


		</pre>
		<p>捕获流 </p>
		<pre>
			
    捕获型事件(event capturing)：事件从最不精确的对象(document 对象)开始触发，然后到最精确(也可以在窗口级别捕获事件，不过必须由开发人员特别指定)。

		</pre>
		
		<img src="https://kingdomrain.github.io/img/t01177e00ec11726375.png">
		<p>addEventListner</p>
		<pre>
			格式:对象.addEventListener("动作",函数,false(或者true);
			true代表捕获流,false代表冒泡流;
			preventDefault() 取消浏览器默认行为
		</pre>
		<div>Event 对象</div>
		<p>Event 对象代表事件的状态，比如事件在其中发生的元素、键盘按键的状态、鼠标的位置、鼠标按钮的状态。</p>
		<p>常用方法有:</p>
		<pre>
			
	
	onclick 当用户点击某个对象时调用的事件句柄。 
	ondblclick 当用户双击某个对象时调用的事件句柄。 
	onfocus 元素获得焦点。 
	onkeydown 某个键盘按键被按下。 
	onkeypress 某个键盘按键被按下并松开。 
	onkeyup 某个键盘按键被松开。 
	onload 一张页面或一幅图像完成加载。 
	onmousedown 鼠标按钮被按下。 
	onmousemove 鼠标被移动。 
	onmouseout 鼠标从某元素移开。 
	onmouseover 鼠标移到某元素之上。 
	onmouseup 鼠标按键被松开。 
	onreset 重置按钮被点击。 
	onselect 文本被选中。 
	onsubmit 确认按钮被点击。 
	onunload 用户退出页面。 
	button 返回当事件被触发时，哪个鼠标按钮被点击。 
	clientX 返回当事件被触发时，鼠标指针的水平坐标。 
	clientY 返回当事件被触发时，鼠标指针的垂直坐标。 
	screenX 返回当某个事件被触发时，鼠标指针的水平坐标。 
	screenY 返回当某个事件被触发时，鼠标指针的垂直坐标。  


		</pre>
		<div>实例1</div>
		<p>制作一个跟随鼠标移动的图片,代码如下</p>
		<pre>
			var p=document.getElementById("p");
			var img=document.getElementById("img");
			var b=true;
			p.addEventListener("click",function(){
				if(b){
					img.setAttribute("src","loading.gif")
				}else{
					img.setAttribute("src","")
				}
				b=!b;
			},false)
			
			window.addEventListener("mousemove",function(e){
				img.style.top=e.clientY-img.offsetHeight/2+"px";
				img.style.left=e.clientX-img.offsetWidth/2+"px";
				
			},true)
		</pre>
		<p>效果如下</p>
		<img src="https://kingdomrain.github.io/img/QQ截图20161212194036.jpg">
		
		<div>实例2</div>
		<p>制作一个获取验证码的按钮,代码如下</p>
		<pre>
			var but=document.getElementById("but");
			var b=false;
			var i=4;
			var settime;
			but.addEventListener("click",function(){
				b=true;
				clearTimeout(settime);
				i++;
				time();
				
				settime=setInterval(time,1000)
				//but.disabled=true;
			},false)
			function time(){
				if(b){
					if(i>=0){
						
					but.innerHTML=i+"秒后重新获取";
					i--;
					
					}else{
					but.innerHTML="点击获取短信";
					i=4;
					but.disabled=false;
					b=false;
					}
				}
			}
		</pre>
		<p>结果如图所示</p>
		<img src="https://kingdomrain.github.io/img/QQ截图20161212194309.jpg">
		<div>实例3</div>
		<p>制作彩色时间表,代码如下</p>
		<pre>
			var img = ["images/0.png", "images/1.png", "images/2.png", "images/3.png", "images/4.png", "images/5.png", "images/6.png", "images/7.png", "images/8.png", "images/9.png"];
		var imglist = document.getElementsByTagName("img");
		var weklist = ["星期天", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
		var p = document.getElementsByTagName("p")[0];

		function time1() {
			var time = new Date();
			var year = time.getFullYear();
			var mo = time.getMonth()+1;
			var day = time.getDate();
			var ho = time.getHours();
			var min = time.getMinutes();
			var sec = time.getSeconds();
			var wek = time.getDay();
			imglist[0].src = img[(ho - ho % 10) / 10];
			imglist[1].src = img[ho % 10];
			imglist[3].src = img[(min - min % 10) / 10];
			imglist[4].src = img[min % 10];
			imglist[6].src = img[(sec - sec % 10) / 10];
			imglist[7].src = img[sec % 10];
			p.innerHTML = " " + year + "年" + mo + "月" + day + "日" + weklist[wek];
		}
		time1();
		setInterval(time1, 1000);
		</pre>
		<p>结果如图所示</p>
		<img src="https://kingdomrain.github.io/img/QQ截图20161212194430.jpg">
	</body>
</html>
